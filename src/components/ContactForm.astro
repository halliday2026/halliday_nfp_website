---
---

<form id="contact-form" class="space-y-6">
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="fullName" class="block text-sm font-medium mb-2">Full Name *</label>
      <input
        type="text"
        id="fullName"
        name="fullName"
        required
        class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
        placeholder="Jane Smith"
      />
    </div>
    <div>
      <label for="email" class="block text-sm font-medium mb-2">Email Address *</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
        placeholder="jane@nonprofit.org"
      />
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="phoneNumber" class="block text-sm font-medium mb-2">Phone Number</label>
      <input
        type="tel"
        id="phoneNumber"
        name="phoneNumber"
        class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
        placeholder="(555) 123-4567"
      />
    </div>
    <div>
      <label for="bestTimeToCall" class="block text-sm font-medium mb-2">Best Time to Call</label>
      <select
        id="bestTimeToCall"
        name="bestTimeToCall"
        class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
      >
        <option value="">Select a time...</option>
        <option value="Morning">Morning</option>
        <option value="Afternoon">Afternoon</option>
        <option value="Evening">Evening</option>
      </select>
    </div>
  </div>

  <div>
    <label for="organizationName" class="block text-sm font-medium mb-2">Organization Name</label>
    <input
      type="text"
      id="organizationName"
      name="organizationName"
      class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
      placeholder="Your Organization"
    />
  </div>

  <div>
    <label for="interestedIn" class="block text-sm font-medium mb-2">What are you interested in?</label>
    <select
      id="interestedIn"
      name="interestedIn"
      class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors bg-white"
    >
      <option value="">Select an option...</option>
      <option value="Data Collection Automation">Data Collection Automation</option>
      <option value="Analysis & Dashboards">Analysis & Dashboards</option>
      <option value="Reporting & Visualization">Reporting & Visualization</option>
      <option value="Custom Tool Development">Custom Tool Development</option>
      <option value="Full Evaluation Workflow Review">Full Evaluation Workflow Review</option>
      <option value="General Inquiry">General Inquiry</option>
    </select>
  </div>

  <div>
    <label for="comments" class="block text-sm font-medium mb-2">Tell us about your evaluation process and challenges *</label>
    <textarea
      id="comments"
      name="comments"
      required
      rows="5"
      class="w-full px-4 py-3 rounded-lg border border-[var(--color-border)] focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] outline-none transition-colors resize-y bg-white"
      placeholder="What does your current evaluation workflow look like? What's taking the most time or causing the most frustration?"
    ></textarea>
  </div>

  <button
    type="submit"
    id="submit-btn"
    class="w-full sm:w-auto bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white px-8 py-4 rounded-full text-base font-semibold transition-colors disabled:opacity-60 disabled:cursor-not-allowed"
  >
    Send Message
  </button>
</form>

<div id="form-success" class="hidden p-5 rounded-xl bg-green-50 border border-green-200 text-green-800">
  <div class="flex items-start gap-3">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <p>Thank you! We received your request and will be in touch soon to schedule your workflow review.</p>
  </div>
</div>

<div id="form-error" class="hidden p-5 rounded-xl bg-red-50 border border-red-200 text-red-800">
  <div class="flex items-start gap-3">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <p>Something went wrong. Please try again or email us directly at <a href="mailto:chris@hallidayinc.com" class="underline font-medium">chris@hallidayinc.com</a>.</p>
  </div>
</div>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
  const successMsg = document.getElementById('form-success')!;
  const errorMsg = document.getElementById('form-error')!;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    errorMsg.classList.add('hidden');

    const formData = new FormData(form);
    const data: Record<string, string> = {};
    formData.forEach((value, key) => {
      data[key] = value as string;
    });

    try {
      const response = await fetch(
        'https://qncqegweobwyudatlomq.supabase.co/functions/v1/contact-form',
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        }
      );

      if (!response.ok) throw new Error('Submission failed');

      form.classList.add('hidden');
      successMsg.classList.remove('hidden');
    } catch {
      errorMsg.classList.remove('hidden');
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send Message';
    }
  });
</script>
